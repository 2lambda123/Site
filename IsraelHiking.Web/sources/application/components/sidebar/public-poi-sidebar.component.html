<div [dir]="resources.direction">
    <div fxLayout="row">
        <div fxFlex *ngIf="!isHideEditMode()">
            <button mat-button fxFill class="no-padding" (click)="setEditMode()" matTooltip="{{resources.edit}}" matTooltipPosition="below" angulartics2On="click" angularticsCategory="POI" angularticsAction="Edit POI"><i class="fa icon-pencil"></i></button>
        </div>
        <div fxFlex *ngIf="isEditMode()">
            <button mat-button fxFill class="no-padding" (click)="save()" [disabled]="isLoading" matTooltip="{{resources.save}}" matTooltipPosition="below" angulartics2On="click" angularticsCategory="POI" angularticsAction="Save POI"><i class="fa icon-check"></i></button>
        </div>
        <div fxFlex *ngIf="isRoute()">
            <button mat-button fxFill class="no-padding" (click)="convertToRoute()" matTooltip="{{resources.convertToRoute}}" matTooltipPosition="below" angulartics2On="click" angularticsCategory="POI" angularticsAction="Convert POI to route"><i class="fa icon-plus"></i></button>
        </div>
        <div fxFlex *ngIf="!isRoute()">
            <button mat-button fxFill class="no-padding" (click)="addPointToRoute()" matTooltip="{{resources.addPointToRoute}}" matTooltipPosition="below" angulartics2On="click" angularticsCategory="POI" angularticsAction="Convert POI to point"><i class="fa icon-plus"></i></button>
        </div>
        <div fxFlex>
            <button mat-button fxFill class="no-padding" (click)="clear()" matTooltip="{{resources.clear}}" matTooltipPosition="below" angulartics2On="click" angularticsCategory="POI" angularticsAction="Clear and close"><i class="fa icon-eye-slash"></i></button>
        </div>
        <div fxFlex>
            <button mat-button fxFill class="no-padding" (click)="voteUp()" matTooltip="{{resources.worthIt}}" matTooltipPosition="below"><i class="fa-2x icon-thumbs-up" [style.color]="canVote('up') ? 'green' : 'grey'"></i></button>
        </div>
        <div fxFlex>
            <h3 fxFill class="flex-center"><span dir="ltr">{{rating || 0}}</span></h3>
        </div>
        <div fxFlex>
            <button mat-button fxFill class="no-padding" (click)="voteDown()" matTooltip="{{resources.notWorthIt}}" matTooltipPosition="below"><i class="fa-2x icon-thumbs-down" [style.color]="canVote('down') ? 'red' : 'grey'"></i></button>
        </div>
        <div fxFlex>
            <button mat-button fxFill class="no-padding" (click)="close()" matTooltipPosition="below"><i class="fa icon-close"></i></button>
        </div>
    </div>
    <mat-spinner *ngIf="isLoading"></mat-spinner>
    <poi-main-info [info]="info" [isEditMode]="isEditMode()"></poi-main-info>
    <div *ngIf="isEditMode()">
        <div *ngFor="let url of info.urls; let i = index; trackBy:trackByIndex" fxLayout="row">
            <div fxFlex="90">
                <mat-form-field fxFill hintLabel="{{resources.aLinkToAWebsite}}">
                    <input matInput type="text" [dir]="'ltr'" [(ngModel)]="info.urls[i]" placeholder="{{resources.website}}" fxFill />
                </mat-form-field>
            </div>
            <div fxFlex="10">
                <button mat-button fxFill (click)="removeUrl(i)"><i class="fa icon-trash"></i></button>
            </div>
        </div>
        <br />
        <div fxLayout="row" (click)="addEmptyUrl()" class="cursor-pointer">
            <div fxFlex="90">
                {{resources.addLink}}
            </div>
            <div fxFlex="10">
                <button mat-button fxFill><i class="fa icon-plus"></i></button>
            </div>
        </div>
    </div>
    <div *ngIf="isEditMode() && isAdvanced">
        <div fxLayout="row">
            <div fxFlex="90">
                <mat-form-field fxFill>
                    <mat-select placeholder="{{resources.categories}}" [ngModel]="selectedCategory" (change)="selectCategory($event)" fxFill>
                        <mat-option *ngFor="let category of categories" [value]="category"><i class="fa" [ngClass]="category.icon" [style.color]="category.color"></i> {{resources.translate(category.label)}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <br />
        <br />
        <div fxLayout="row" fxLayoutWrap>
            <button mat-button *ngFor="let icon of selectedCategory.icons" (click)="selectIcon(icon)" fxFlex [ngClass]="{active: icon == selectedCategory.selectedIcon}">
                <i class="fa" [ngClass]="icon.icon" [style.color]="icon.color"></i>
                <br />
                {{resources.translate(icon.label)}}
            </button>
        </div>
    </div>
    <br />
    <div fxLayout="row">
        <a *ngFor="let url of info.urls; let i = index" [href]="url" target="_blank" class="margin-10-reverse">
            <img *ngIf="sourceImageUrls[i]" [src]="sourceImageUrls[i]" alt="" height="32" width="32" [style.float]="resources.getImageFloat(title)" />
        </a>
        <a *ngIf="getEditElementOsmAddress()" [href]="getEditElementOsmAddress()" target="_blank" class="margin-10-reverse" matTooltip="{{resources.editThisMapUsingOsm}}" matTooltipPosition="above" angulartics2On="click" angularticsCategory="OSM" angularticsAction="Edit element in OSM">
            <img [src]="resources.getResizedImageUrl('https://upload.wikimedia.org/wikipedia/commons/b/b0/Openstreetmap_logo.svg', 32)" height="32" width="32" />
        </a>
        <mat-slide-toggle *ngIf="isEditMode() && !isRoute()" [(ngModel)]="isAdvanced" class="cursor-pointer">{{resources.more}}</mat-slide-toggle>
    </div>
</div>