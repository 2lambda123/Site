<div class="marker-popup" [dir]="resources.direction">
    <div fxLayout="row" [hidden]="thumbnail">
        <div fxFlex [ngClass]="resources.getTextAlignment()">
            <label [hidden]="!isEditMode()">
                <a md-button [style.color]="'black'" fxFill angulartics2On="click" angularticsCategory="POI" angularticsEvent="Upload image"><i class="fa icon-camera fa-5x"></i> <i class="fa icon-plus fa-3x"></i></a>
                <input type="file" (change)="uploadImage($event)" [style.display]="'none'" />
            </label>
            <i [hidden]="isEditMode()" class="fa icon-camera fa-5x"></i>
        </div>
        <div fxFlex="66" [hidden]="isEditMode()" class="cursor-pointer">
            <h2 [ngClass]="resources.getTextAlignment()" (click)="setEditMode()">{{resources.clickToEdit}}</h2>
        </div>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-around none" fxLayoutGap="10px" [hidden]="!thumbnail">
        <img [src]="thumbnail" class="img-responsive" height="100"/>
    </div>
    <div fxLayout="row">
        <div fxFlex="80">
            <a href="{{address}}" target="_blank">
                <h3 [ngClass]="resources.getTextAlignment(title)" [dir]="resources.getDirection(title)" class="chrome-wordwrap-fix">{{title}}</h3>
            </a>
            <div fxLayout="row" [hidden]="!isEditMode()">
                <md-input-container fxFill hintLabel="{{resources.itsYourTimeToShine}}">
                    <textarea rows="4" mdInput [dir]="resources.getDirection(description)" [(ngModel)]="description" placeholder="{{resources.description}}" fxFill></textarea>
                </md-input-container>
            </div>
            <div fxLayout="row" [hidden]="!isEditMode()">
                <a class="cursor-pointer" (click)="openUpdatePointDialog($event)">{{resources.more}}</a>
            </div>
            <div fxLayout="row" [hidden]="isEditMode()">
                <p fxFill [ngClass]="resources.getTextAlignment(getDescrition())"
                   [dir]="resources.getDirection(getDescrition())">
                    {{getDescrition()}}
                </p>
            </div>
        </div>
        <div fxFlex>
            <div fxLayout="column">
                <button md-button fxFill (click)="voteUp()" mdTooltip="{{resources.worthIt}}" mdTooltipPosition="before"><i class="fa-2x icon-thumbs-up" [style.color]="canVote() ? 'green' : 'grey'"></i></button>
                <h3 fxFill class="text-center"><span dir="ltr">{{rating || 0}}</span></h3>
                <button md-button fxFill (click)="voteDown()" mdTooltip="{{resources.notWorthIt}}" mdTooltipPosition="before"><i class="fa-2x icon-thumbs-down" [style.color]="canVote() ? 'red' : 'grey'"></i></button>
            </div>
        </div>
    </div>
    <div fxLayout="row">
        <div fxFlex [hidden]="isHideEditMode()">
            <button md-button fxFill (click)="setEditMode()" mdTooltip="{{resources.edit}}" mdTooltipPosition="above" angulartics2On="click" angularticsCategory="POI" angularticsEvent="Edit POI"><i class="fa icon-pencil"></i></button>
        </div>
        <div fxFlex [hidden]="!isEditMode()">
            <button md-button fxFill (click)="save()" mdTooltip="{{resources.save}}" mdTooltipPosition="above" angulartics2On="click" angularticsCategory="POI" angularticsEvent="Save POI"><i class="fa icon-check"></i></button>
        </div>
        <div fxFlex [hidden]="!canBeConvertedToRoute()">
            <button md-button fxFill (click)="convertToRoute()" mdTooltip="{{resources.convertToRoute}}" mdTooltipPosition="above" angulartics2On="click" angularticsCategory="POI" angularticsEvent="Convert POI to route"><i class="fa icon-plus"></i></button>
        </div>
        <div fxFlex [hidden]="!canBeConvertedToRoute()">
            <button md-button fxFill (click)="clearSelectedRoute()" mdTooltip="{{resources.clear}}" mdTooltipPosition="above" angulartics2On="click" angularticsCategory="POI" angularticsEvent="Clear selected route"><i class="fa icon-eye-slash"></i></button>
        </div>
    </div>
</div>